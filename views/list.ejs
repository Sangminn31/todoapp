<h1>Todo List</h1>

<a href="/posts/write" class="btn btn-primary mb-3">Write Post</a>

<% if (success_msg && success_msg.length > 0) { %>
  <div class="alert alert-success"><%= success_msg %></div>
<% } %>

<% if (error_msg && error_msg.length > 0) { %>
  <div class="alert alert-danger"><%= error_msg %></div>
<% } %>

<% if (messages.error) { %>
  <div class="alert alert-danger"><%= messages.error %></div>
<% } %>

<div class="list-group">
  <% posts.forEach(function(post) { %>
    <a href="/posts/detail/<%= post._id %>" class="list-group-item list-group-item-action">
      <h5 class="mb-1"><%= post.title %></h5>
      <p class="mb-1"><%= post.content %></p>
      <% if (post.user && post.user.username) { %>
        <small>Posted by <%= post.user.username %> on <%= post.createdAt.toDateString() %></small>
      <% } else { %>
        <small>Posted on <%= post.createdAt.toDateString() %></small>
      <% } %>
    </a>
  <% }) %>
</div>
